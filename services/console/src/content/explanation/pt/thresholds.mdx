---
title: "Limites & Alertas"
description: "Vis√£o geral do uso de limites para identificar regress√µes de performance em benchmarks de c√≥digo com alertas"
heading: "Limites & Alertas"
sortOrder: 4
---

Limites podem ser criados para a combina√ß√£o √∫nica de um tipo de m√©trica, ramo e plataforma de teste.
Eles s√£o testes de signific√¢ncia estat√≠stica que usam um
[Z-score](https://en.wikipedia.org/wiki/Standard_score)
ou [teste t de Student](https://en.wikipedia.org/wiki/Student%27s_t-test)
para detectar regress√µes de performance e gerar Alertas.
Quando uma m√©trica est√° abaixo do Limite Inferior de um Limite ou acima do Limite Superior de um Limite,
um Alerta √© gerado para essa m√©trica.

Os limites funcionam melhor quando:
- N√£o h√° diferen√ßas extremas entre as execu√ß√µes de benchmark
- As execu√ß√µes de benchmark s√£o totalmente independentes uma da outra
- O n√∫mero de itera√ß√µes para uma √∫nica execu√ß√£o de benchmark √© inferior a 10% das m√©tricas hist√≥ricas

Se houver menos de 30 m√©tricas hist√≥ricas para a combina√ß√£o de tipo de M√©trica, Ramo e Plataforma de Teste, ent√£o um Limite de teste t de Student deve ser usado e __*n√£o*__ um Limite de Z-score.

<div class="content has-text-centered">
    <figure>
<img
    src="https://upload.wikimedia.org/wikipedia/commons/2/25/The_Normal_Distribution.svg"
    width="800"
    height="600"
    alt="The Normal Distribution https://commons.wikimedia.org/wiki/File:The_Normal_Distribution.svg"
/>
<br/>
<small>üê∞ Don't Panic! This will all make sense in a minute.</small>
</figure>
</div>

## Teste de Signific√¢ncia Estat√≠stica

### Z-score

O Z-score mede o n√∫mero de [desvios padr√£o](https://en.wikipedia.org/wiki/Standard_deviation) (œÉ) acima ou abaixo da m√©dia das m√©tricas hist√≥ricas. O desvio padr√£o (œÉ) tamb√©m pode ser expresso como um _limite_ inferior ou _limite_ superior como uma porcentagem cumulativa.

Por exemplo, dois desvios padr√£o (2œÉ) √© o mesmo que uma porcentagem cumulativa de limite superior de 97,7%, como ilustrado acima. Ao criar os Limites de Z-score, usa-se a nota√ß√£o decimal da porcentagem cumulativa.
Neste exemplo, a porcentagem cumulativa do limite superior de 97,7% seria um Limite Superior de `0.977`.
Na pr√°tica, um Limite como esse seria √∫til para o tipo de M√©trica de Lat√™ncia. Ou seja, um valor maior indicaria uma regress√£o de desempenho.

Quando um valor menor indicaria uma regress√£o de desempenho, como com o tipo de M√©trica de Throughput, deve-se usar uma porcentagem cumulativa inferior. Uma porcentagem cumulativa de limite inferior de 97,7% corresponderia a dois desvios padr√£o abaixo da m√©dia (-2œÉ).
Isso seria dado em nota√ß√£o decimal como um Limite Inferior de `0.977`.

<br />

> üê∞ Dica: Ao usar um Limite de Z-score, defina o Tamanho M√≠nimo da Amostra para pelo menos 30.

### Teste t de Student

O teste t de Student mede a probabilidade de uma m√©trica dada estar acima ou abaixo da m√©dia das m√©tricas hist√≥ricas. Essa probabilidade √© chamada de intervalo de confian√ßa (IC). O intervalo de confian√ßa (IC) √© expresso como um percentual de confian√ßa de limite inferior ou limite superior.

Por exemplo, um percentual de confian√ßa de limite superior de 95,0% indica que 95,0% das m√©tricas devem ser _menores_ do que um m√°ximo esperado. Ao criar Limites de teste t, usa-se a nota√ß√£o decimal do percentual de confian√ßa.
Neste exemplo, o percentual de confian√ßa do limite superior de 95,0% seria um Limite Superior de `0.95`.
Na pr√°tica, um Limite como esse seria √∫til para o tipo de m√©trica de Lat√™ncia. Ou seja, um valor maior indicaria uma regress√£o de desempenho.

Quando um valor menor indicaria uma regress√£o de desempenho, como com o tipo de M√©trica de Throughput, deve-se usar um percentual de confian√ßa do limite inferior.
Um percentual de confian√ßa do limite inferior de 95,0% indicaria que as m√©tricas devem ser _maiores_ do que um m√≠nimo esperado.
Isso seria dado em nota√ß√£o decimal como um Limite Inferior de `0.95`.

<br />

> üê∞ Dica: Use um teste t de Student como Limite se voc√™ tiver menos de 30 m√©tricas hist√≥ricas.

## Limite de Signific√¢ncia Estat√≠stica

O significado do limite de signific√¢ncia estat√≠stica depende do teste de signific√¢ncia estat√≠stica:
- Z-score: Desvio padr√£o (œÉ) expresso como uma porcentagem cumulativa decimal
- Teste t de Student: Intervalo de confian√ßa (IC) expresso como um percentual de confian√ßa decimal

Cada m√©trica √© verificada contra o limite de signific√¢ncia estat√≠stica do Limite, se existir.
Isso pode incluir um Limite Inferior, Limite Superior ou ambos.
Um Limite √© calculado para cada Limite.
Esse Limite √© ent√£o comparado com a m√©trica atual.
Se essa m√©trica ficar fora do Limite, um Alerta ser√° gerado.

> üê∞ Dica: Para falhar uma constru√ß√£o CI quando um limite √© violado, use a flag `--err` para o comando CLI <code><a href="/pt/docs/explanation/bencher-run/">bencher run</a></code>.

### Limite Inferior
Um limite inferior pode ser definido para um Limite.
Ele √© usado quando um valor menor indicaria uma regress√£o de desempenho,
como com o tipo de M√©trica de Throughput.
O valor deve ser um decimal entre `0.5` e `1.0`.

Por exemplo, se voc√™ usou um Z-score e suas m√©tricas hist√≥ricas tinham uma m√©dia de `100` e um desvio padr√£o de `10`,
ent√£o um Limite Inferior de `0.977` criaria um Limite no valor de `80.05`.
Qualquer valor inferior a `80.05` geraria um Alerta.

### Limite Superior
Um limite superior pode ser definido para um Limite.
Ele √© usado quando um valor maior indicaria uma regress√£o de performance,
como com o tipo de M√©trica de Lat√™ncia.
O valor deve ser um decimal entre `0.5` e `1.0`.

Por exemplo, se voc√™ usou um Z-score e suas m√©tricas hist√≥ricas tinham uma m√©dia de `100` e um desvio padr√£o de `10`,
ent√£o um Limite Superior de `0.977` criaria um Limite no valor de `119.95`.
Qualquer valor maior que `119.95` geraria um Alerta.

## Tamanho da Amostra

### Tamanho m√≠nimo da amostra
Um tamanho m√≠nimo de amostra pode ser definido para um Limite.
O Limite s√≥ executar√° seu teste de signific√¢ncia estat√≠stica se o n√∫mero de m√©tricas hist√≥ricas for maior ou igual ao tamanho m√≠nimo da amostra.

### Tamanho m√°ximo da amostra
Um tamanho m√°ximo de amostra pode ser definido para um Limite.
O Limite limitar√° a si mesmo apenas √†s m√©tricas hist√≥ricas mais recentes,
limitadas ao tamanho m√°ximo da amostra para o seu teste de signific√¢ncia estat√≠stica.

## Tamanho da Janela
Um tamanho de janela em segundos pode ser definido para um Limite.
O Limite limitar√° a si mesmo apenas √†s m√©tricas hist√≥ricas mais recentes,
limitadas pela janela de tempo dada para o seu teste de signific√¢ncia estat√≠stica.

## Alertas
Os alertas s√£o gerados quando uma m√©trica est√° abaixo do Limite Inferior de um Limite ou acima do Limite Superior de um Limite. Para falhar uma constru√ß√£o CI no caso de um Alerta, defina a flag `--err` ao usar o comando CLI <code><a href="/pt/docs/explanation/bencher-run/">bencher run</a></code>.

### Suprimindo Alertas
√Äs vezes, pode ser √∫til suprimir Alertas para um Benchmark espec√≠fico.
A melhor maneira de fazer isso √© adicionando um desses sufixos especiais ao nome desse Benchmark:

- `_bencher_ignore`
- `BencherIgnore`
- `-bencher-ignore`

Por exemplo, se seu Benchmark se chamava `my_flaky_benchmark`, ent√£o renome√°-lo para `my_flaky_benchmark_bencher_ignore`
ignoraria apenas esse Benchmark espec√≠fico da√≠ em diante.
Benchmarks ignorados n√£o s√£o verificados contra o Limite, mesmo que um exista.
No entanto, as m√©tricas para Benchmarks ignorados ainda s√£o armazenadas.
Continuando com nosso exemplo, os resultados de `my_flaky_benchmark_bencher_ignore` ainda seriam armazenados no banco de dados sob `my_flaky_benchmark`.
Se voc√™ remover o sufixo e retornar ao nome original do Benchmark,
ent√£o as coisas continuar√£o exatamente de onde voc√™ parou.

<br />
<br />

> üê∞ Parab√©ns! Voc√™ aprendeu tudo sobre Limites & Alertas! üéâ

<br />

<h2><a href="/pt/docs/explanation/continuous-benchmarking/">Continue: Benchmarking Cont√≠nuo ‚û°</a></h2>