---
title: "Umbrales & Alertas"
description: "Descripci√≥n general de c√≥mo utilizar los umbrales para detectar las regresiones de rendimiento en los benchmarks de c√≥digo con alertas"
heading: "Umbrales & Alertas"
sortOrder: 4
---

Los umbrales se pueden crear para la combinaci√≥n √∫nica de un Tipo de M√©trica, Rama y Banco de Pruebas.
Son tests de significaci√≥n estad√≠stica que utilizan ya sea un
[score Z](https://es.wikipedia.org/wiki/Unidad_tipificada)
o una [prueba t de Student](https://es.wikipedia.org/wiki/Prueba_t_de_Student)
para detectar regresiones de rendimiento y generar Alertas.
Cuando una M√©trica est√° por debajo del l√≠mite inferior de un umbral o por encima de su l√≠mite superior,
se genera una Alerta para esa M√©trica.

Los umbrales funcionan mejor cuando:
- No hay diferencias extremas entre las ejecuciones de benchmarks
- Las ejecuciones de benchmarks son totalmente independientes entre s√≠
- El n√∫mero de iteraciones de una √∫nica ejecuci√≥n de benchmark es menos del 10% de las m√©tricas hist√≥ricas

Si hay menos de 30 m√©tricas hist√≥ricas para la combinaci√≥n de Tipo de M√©trica, Rama y Banco de Pruebas, entonces se debe utilizar un umbral de prueba t de Student y __*no*__ un umbral de score Z.

<div class="content has-text-centered">
    <figure>
<img
    src="https://upload.wikimedia.org/wikipedia/commons/2/25/The_Normal_Distribution.svg"
    width="800"
    height="600"
    alt="La distribuci√≥n Normal https://commons.wikimedia.org/wiki/File:The_Normal_Distribution.svg"
/>
<br/>
<small>üê∞ ¬°No te alteres! Todo esto tendr√° sentido en un minuto.</small>
</figure>
</div>

## Prueba de Significancia Estad√≠stica

### Score Z

El score Z mide el n√∫mero de [desviaciones est√°ndar](https://es.wikipedia.org/wiki/Desviaci%C3%B3n_t%C3%ADpica) (œÉ) que una M√©trica dada est√° por encima o por debajo de la media de las m√©tricas hist√≥ricas.
La desviaci√≥n est√°ndar (œÉ) tambi√©n puede expresarse como un porcentaje acumulativo de _l√≠mite inferior_ o _l√≠mite superior_.

Por ejemplo, dos desviaciones est√°ndar (2œÉ) son lo mismo que un porcentaje acumulativo de _l√≠mite superior_ del 97,7%, como se muestra arriba.
Al crear umbrales de score Z, se utiliza la notaci√≥n decimal del porcentaje acumulativo.
En este ejemplo, el porcentaje acumulativo de _l√≠mite superior_ del 97,7% ser√≠a un L√≠mite Superior de `0.977`.
En la pr√°ctica, un umbral como este ser√≠a √∫til para el Tipo de M√©trica de Latencia.
Es decir, un valor m√°s grande indicar√≠a una regresi√≥n de rendimiento.

Cuando un valor m√°s peque√±o indicar√≠a una regresi√≥n de rendimiento, como en el Tipo de M√©trica de Rendimiento,
deber√≠a utilizarse un porcentaje acumulativo de _l√≠mite inferior_.
Un porcentaje acumulativo de _l√≠mite inferior_ del 97,7% corresponder√≠a a dos desviaciones est√°ndar por debajo de la media (-2œÉ).
Esta ser√≠a la notaci√≥n decimal como un L√≠mite Inferior de `0.977`.

<br />

> üê∞ Consejo: Cuando uses un umbral de score Z, establece el Tama√±o M√≠nimo de Muestra en al menos 30.

### Prueba t de Student

La prueba t de Student mide cu√°n probable es que una M√©trica dada est√© por encima o por debajo de la media de las m√©tricas hist√≥ricas.
Esta probabilidad se llama intervalo de confianza (IC).
El intervalo de confianza (IC) se expresa como un porcentaje de confianza de _l√≠mite inferior_ o _l√≠mite superior_.

Por ejemplo, un porcentaje de confianza de _l√≠mite superior_ del 95.0% indica que el 95.0% de las M√©tricas deber√≠an ser _menores_ que un _m√°ximo_ esperado.
Al crear umbrales de prueba t, se utiliza la notaci√≥n decimal del porcentaje de confianza.
En este ejemplo, el porcentaje de confianza de _l√≠mite superior_ del 95.0% ser√≠a un L√≠mite Superior de `0.95`.
En la pr√°ctica, un umbral como este ser√≠a √∫til para el Tipo de M√©trica de Latencia.
Es decir, un valor m√°s grande indicar√≠a una regresi√≥n de rendimiento.

Cuando un valor m√°s peque√±o indicar√≠a una regresi√≥n de rendimiento, como en el Tipo de M√©trica de Rendimiento,
deber√≠a utilizarse un porcentaje de confianza de _l√≠mite inferior_.
Un porcentaje de confianza de _l√≠mite inferior_ del 95.0% indicar√≠a que las M√©tricas deber√≠an ser _mayores_ que un _m√≠nimo_ esperado.
Este se dar√≠a en notaci√≥n decimal como un L√≠mite Inferior de `0.95`.

<br />

> üê∞ Consejo: Usa un umbral de prueba t si tienes menos de 30 m√©tricas hist√≥ricas.

## L√≠mite de Significancia Estad√≠stica

El significado del l√≠mite de significancia estad√≠stica depende de la prueba de significancia estad√≠stica:
- Score Z: Desviaci√≥n est√°ndar (œÉ) expresada como un porcentaje acumulativo decimal
- Prueba t: Intervalo de confianza (IC) expresado como un porcentaje de confianza decimal

Cada M√©trica se comprueba contra el l√≠mite de significancia estad√≠stica del umbral si existe.
Esto puede incluir un L√≠mite Inferior, L√≠mite Superior, o ambos.
Se calcula un L√≠mite de umbral para cada L√≠mite.
Este L√≠mite de umbral se compara luego con la M√©trica actual.
Si esa M√©trica cae fuera del L√≠mite de umbral, se generar√° una Alerta.

> üê∞ Consejo: Para hacer fallar una compilaci√≥n CI cuando un l√≠mite es violado usa la bandera `--err` para el comando de la interfaz de l√≠nea de comandos <code><a href="/docs/es/explanation/bencher-run">bencher run</a></code>.

### L√≠mite Inferior
Se puede establecer un l√≠mite inferior para un umbral.
Se utiliza cuando un valor m√°s peque√±o indicar√≠a una regresi√≥n de rendimiento,
como con el Tipo de M√©trica de Rendimiento.
El valor debe ser un decimal entre `0.5` y `1.0`.

Por ejemplo, si usaste un score Z y tus m√©tricas hist√≥ricas ten√≠an una media de `100` y una desviaci√≥n est√°ndar de `10`,
entonces un L√≠mite Inferior de `0.977` crear√° un L√≠mite Inferior en `80.05`.
Cualquier valor inferior a `80.05` generar√≠a una Alerta.

### L√≠mite Superior
Se puede establecer un l√≠mite superior para un umbral.
Se utiliza cuando un valor mayor indicar√≠a una regresi√≥n de rendimiento,
como con el Tipo de M√©trica de Latencia.
El valor debe ser un decimal entre `0.5` y `1.0`.

Por ejemplo, si usaste un score Z y tus m√©tricas hist√≥ricas ten√≠an una media de `100` y una desviaci√≥n est√°ndar de `10`,
entonces un L√≠mite Superior de `0.977` crear√≠a un L√≠mite Superior en `119.95`.
Cualquier valor superior a `119.95` generar√≠a una Alerta.

## Tama√±o de la Muestra

### Tama√±o M√≠nimo de la Muestra
Se puede establecer un tama√±o m√≠nimo de muestra para un umbral.
El umbral s√≥lo ejecutar√° su prueba de significancia estad√≠stica
si el n√∫mero de m√©tricas hist√≥ricas es mayor o igual al tama√±o m√≠nimo de muestra.

### Tama√±o M√°ximo de la Muestra
Se puede establecer un tama√±o m√°ximo de muestra para un umbral.
El umbral se limitar√° a s√≥lo las m√©tricas hist√≥ricas m√°s recientes
limitado al tama√±o m√°ximo de la muestra para su prueba de significancia estad√≠stica.

## Tama√±o de la Ventana
Se puede establecer un tama√±o de ventana en segundos para un umbral.
El umbral se limitar√° a s√≥lo las m√©tricas hist√≥ricas m√°s recientes
delimitadas por la ventana de tiempo dada para su prueba de significancia estad√≠stica.

## Alertas
Se generan Alertas cuando una M√©trica est√° por debajo del L√≠mite Inferior de un umbral o por encima de su L√≠mite Superior.
Para hacer fallar una compilaci√≥n CI en el caso de una Alerta, establece la bandera `--err` cuando utilices el comando de l√≠nea de comandos de  <code><a href="/docs/es/explanation/bencher-run">bencher run</a></code>.

### Supresi√≥n de Alertas
A veces puede ser √∫til suprimir Alertas para un Benchmark en particular.
La mejor manera de hacer esto es agregando uno de estos sufijos especiales al nombre de ese Benchmark:

- `_bencher_ignore`
- `BencherIgnore`
- `-bencher-ignore`

Por ejemplo, si tu Benchmark se llamaba `my_flaky_benchmark` entonces renombr√°ndolo a `my_flaky_benchmark_bencher_ignore`
ignorar√≠as justamente ese Benchmark en particular en adelante.
Los Benchmarks ignorados no se verifican contra el umbral, incluso si existe uno.
Sin embargo, las m√©tricas de los Benchmarks ignorados a√∫n se almacenan.
Continuando con nuestro ejemplo, los resultados de `my_flaky_benchmark_bencher_ignore` todav√≠a se almacenar√≠an en la base de datos bajo `my_flaky_benchmark`.
Si quitas el sufijo y vuelves al nombre del Benchmark original,
entonces las cosas continuar√°n justo donde las dejaste.

<br />
<br />

> üê∞ ¬°Felicidades! ¬°Has aprendido todo sobre Umbrales & Alertas! üéâ

<br/>

<h2><a href="/docs/es/explanation/continuous-benchmarking">Sigue Adelante: Benchmarking Continuo ‚û°</a></h2>
