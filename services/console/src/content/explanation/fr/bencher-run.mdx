---
title: "bencher run"
description: "Aper√ßu de la sous-commande CLI bencher run et de tous ses flags, arguments, et fonctionnalit√©s"
heading: "Sous-commande CLI bencher run"
sortOrder: 2
---

`bencher run` est la sous-commande CLI la plus utilis√©e.
Elle est utilis√©e pour ex√©cuter des benchmarks et en rapporter les r√©sultats.
De ce fait, c'est l'une des sous-commandes les plus compliqu√©es.
Cette page expliquera les options, flags, et arguments qui peuvent √™tre pass√©s √† `bencher run`.

## Commande Benchmark

Le premier et seul argument de `bencher run` est la commande benchmark optionnelle.
C'est la commande qui sera ex√©cut√©e, invoquant votre harnais benchmark.
Elle peut aussi √™tre d√©finie en utilisant la variable d'environnement `BENCHER_CMD`.
La commande est ex√©cut√©e dans un shell, qui peut √™tre configur√© avec les options `--shell` et `--flag`.
Sa sortie est analys√©e par un adaptateur de harnais benchmark, qui peut √™tre d√©fini en utilisant l'option `--adapter`.
Cependant, si le harnais benchmark sort vers un fichier, alors l'option `--file` doit √©galement √™tre utilis√©e pour sp√©cifier le chemin du fichier de sortie.

<br />

> üê∞ Si votre commande de benchmark contient plusieurs mots, alors vous devez l'entourer de guillemets (par exemple `bencher run "bencher mock"`).

<br />

La commande de benchmark peut √™tre ex√©cut√©e plusieurs fois en utilisant l'option `--iter`,
et ces r√©sultats peuvent √™tre regroup√©s en un seul r√©sultat en utilisant l'option `--fold`.
Si une des it√©rations √©choue, alors la commande enti√®re est consid√©r√©e comme ayant √©chou√© √† moins que le flag `--allow-failure` ne soit d√©fini.

Si la commande de benchmark n'est pas sp√©cifi√©e mais que l'option `--file` l'est, alors `bencher run` lira le chemin du fichier de sortie √† la place.
Si la commande de benchmark et l'option `--file` ne sont sp√©cifi√©es, alors `bencher run` lira depuis `stdin` √† la place.
Cela vous permet de sauvegarder la sortie d'une autre commande dans un fichier ou de la conduire dans `bencher run`, respectivement.

## Options

### `--project <PROJECT>`

<br />

Soit l'option `--project` soit la variable d'environnement `BENCHER_PROJECT`
doit √™tre d√©finie sur le slug ou UUID d'un projet d√©j√† existant.
Si les deux sont d√©finis, l'option `--project` a la priorit√© sur la variable d'environnement `BENCHER_PROJECT`.

<br />

### `--token <TOKEN>`

<br />

Soit l'option `--token` soit la variable d'environnement `BENCHER_API_TOKEN` doit √™tre d√©finie sur un token API valide.
Si les deux sont d√©finis, l'option `--token` a la priorit√© sur la variable d'environnement `BENCHER_API_TOKEN`.

<br />

### `--branch <BRANCH>`
### `--if-branch <IF_BRANCH>`
### `--else-if-branch <ELSE_IF_BRANCH>`
### `--else-branch`
### `--endif-branch`

<br />

Voir [s√©lection de branche](/docs/fr/explanation/branch-selection) pour un aper√ßu complet.

<br />

### `--hash <HASH>`

<br />

Optionnel : Un hash de commit SHA-1 de 40 caract√®res.
Si deux rapports ont la m√™me branche et hash, ils seront consid√©r√©s comme provenant du m√™me commit.
Donc, ils auront le m√™me num√©ro de version de branche.

<br />

### `--testbed <TESTBED>`

<br />

Optionnel : Soit l'option `--testbed` soit la variable d'environnement `BENCHER_TESTBED`
peut √™tre d√©finie sur le slug ou UUID d'un banc d'essai d√©j√† existant.
Si les deux sont d√©finis, l'option `--testbed` a la priorit√© sur la variable d'environnement `BENCHER_TESTBED`.
Si aucun n'est d√©fini, alors `localhost` est utilis√© comme banc d'essai par d√©faut.

<br />

### `--adapter <ADAPTER>`
### `--average <AVERAGE>`
### `--file <FILE>`

<br />

Voir [adaptateur de harnais benchmark](/docs/fr/explanation/adapters) pour un aper√ßu complet.

<br />

### `--iter <ITER>`

<br />

Optionnel : Nombre d'it√©rations d'ex√©cution. La valeur par d√©faut est `1`.

### `--fold <FOLD>`

<br />

Optionnel : Replier plusieurs r√©sultats en un seul r√©sultat. \
N√©cessite : `--iter` doit √™tre d√©fini. \
Valeurs possibles :
    - `min` : Valeur minimale
    - `max` : Valeur maximale
    - `mean` : Moyenne des valeurs
    - `median` : M√©diane des valeurs

<br />

### `--backdate <DATETIME_SECONDS>`

<br />

Optionnel : Antidater le rapport (secondes depuis l'√©poque).
NOTE : Cela *n'affectera pas* l'ordre des rapports pass√©s !
C'est utile lors de l'initialisation des donn√©es historiques dans un projet lors de l'importation en ordre _chronologique_.

<br />

### `--allow-failure`

<br />

Optionnel : Autorise l'√©chec du test de benchmark.

<br />

### `--err`

<br />

Optionnel : Erreur lorsqu'une alerte est g√©n√©r√©e. Voir [seuils et alertes](/docs/fr/explanation/thresholds) pour un aper√ßu complet.

<br />

### `--html`

<br />

Optionnel : Affiche les r√©sultats en format HTML.

<br />

### `--quiet`

<br />

Optionnel : Mode silencieux, ne produit que le JSON du rapport final. Par d√©faut, c'est `false`.

<br />

### `--ci-no-metrics`

<br />

Optionnel: Omettre les Mesures de R√©f√©rence et les Limites Limitrophes.
N√©cessite : `--github-actions`

<br />

### `--ci-only-thresholds`

<br />

Optionnel : Publie les r√©sultats seulement sur CI si [un Seuil](/docs/fr/explanation/thresholds) existe pour le types de mesures, Branche et Banc d'essai.
Si aucun Seuils n'existent, alors rien ne sera post√©.
N√©cessite : `--github-actions`

<br />

### `--ci-only-on-alert`

<br />

Optionnel : Commence √† poster les r√©sultats sur CI seulement si [une Alerte](/docs/fr/explanation/thresholds) est g√©n√©r√©e.
Si une Alerte est g√©n√©r√©e, alors les r√©sultats suivants, m√™me s'ils ne contiennent pas d'Alertes, seront √©galement post√©s.
N√©cessite : `--github-actions`

<br />

### `--ci-id`

<br />

Optionnel : ID personnalis√© pour poster les r√©sultats sur CI.
Par d√©faut, Bencher segmentera automatiquement les r√©sultats par la combinaison de : Projet, Branche, Banc d'essai, et [Adaptateur](/docs/fr/explanation/adapters).
D√©finir un ID personnalis√© est utile lorsque Bencher est ex√©cut√© plusieurs fois dans la m√™me workflow CI pour la m√™me combinaison de Projet, Branche, Banc d'essai, et Adaptateur.
N√©cessite : `--github-actions`

<br/>

### `--ci-number`

<br />

Optionnel : Num√©ro de probl√®me pour poster les r√©sultats sur CI.
Bencher fera de son mieux pour d√©tecter le num√©ro de probl√®me CI n√©cessaire pour poster les r√©sultats.
Cependant, cela n'est pas toujours disponible dans des configurations complexes, comme utiliser `workflow_run` dans GitHub Actions.
N√©cessite : `--github-actions`

<br/>

### `--github-actions`

<br />

Optionnel : D√©finir le token d'authentification de l'API GitHub (c'est-√†-dire `--github-actions ${{ secrets.GITHUB_TOKEN }}`).
Lorsque cette option est d√©finie et que `bencher run` est utilis√© dans GitHub Actions dans le cadre d'une pull request,
alors les r√©sultats seront ajout√©s √† la pull request en tant que commentaire.
La mani√®re la plus commode de faire ceci est la [variable d'environnement `GITHUB_TOKEN` de GitHub Actions](https://docs.github.com/fr/actions/security-guides/automatic-token-authentication).

> üê∞ Si vous ex√©cutez √† l'int√©rieur d'un conteneur Docker dans GitHub Action, vous aurez besoin de passer les variables d'environnement suivantes et de monter le chemin sp√©cifi√© par `GITHUB_EVENT_PATH` :
> - `GITHUB_ACTIONS`
> - `GITHUB_EVENT_NAME`
> - `GITHUB_EVENT_PATH`

<br />

### `--shell <SHELL>`

<br />

Optionnel : Chemin de la commande Shell. Par d√©faut √† `/bin/sh` dans les environnements Unix et `cmd` sur Windows.

<br />

### `--flag <FLAG>`

<br />

Optionnel : Flag de la commande Shell. Par d√©faut √† `-c` dans les environnements Unix et `/C` sur Windows.

<br />

### `--host <HOST>`

<br />

Optionnel : URL du serveur Backend. Par d√©faut √† [https://api.bencher.dev](https://api.bencher.dev).

<br />

### `--attempts <ATTEMPTS>`

<br />

Optionnel : Nombre maximal de tentatives de requ√™te. Par d√©faut √† `10`.

<br />


### `--retry-after <RETRY_AFTER>`

<br />

Optionnel : R√©essayer la requ√™te apr√®s le nombre de secondes donn√© (retard exponentiel). Par d√©faut √† `1`.

<br />

### `--strict`

<br />

Optionnel : Analyser strictement les r√©ponses JSON. Par d√©faut, c'est `false`.
L'activation de cette fonctionnalit√© n√©cessitera des mises √† jour client plus fr√©quentes en raison de changements incompatibles.

<br />

### `--dry-run`

<br />

Optionnel : Effectuer une ex√©cution √† blanc. Cela ne stockera aucune donn√©e sur le backend.
Ni un Rapport ni une Branche en d√©tail dans [s√©lection de branche](/docs/fr/explanation/branch-selection) ne seront cr√©√©s.

<br />

### `-h`
### `--help`

<br />

Optionnel : Afficher l'aide.

<br />
<br />

> üê∞ Bravo! Vous avez appris les bases de <code>bencher run</code> ! üéâ

<br/>

<h2><a href="/docs/fr/explanation/branch-selection">Continuer: S√©lection de Branche avec <code>bencher run</code> ‚û°</a></h2>