---
title: "Track Benchmarks"
description: "Catch code benchmark performance regressions with historical continuous benchmarking or relative continuous benchmarking"
heading: "How to use Bencher to Track Benchmarks"
sortOrder: 2
---

import TrackHistorical from "../../../chunks/how_to/track-historical.mdx";
import TrackRelative from "../../../chunks/how_to/track-relative.mdx";

The easiest way to track your benchmarks is the <code><a href="/docs/explanation/bencher-run/">bencher run</a></code> CLI subcommand.
See the [benchmarking overview](/docs/explanation/benchmarking/) for a more in-depth explanation.
This is an example of a <code><a href="/docs/explanation/bencher-run/">bencher run</a></code> CLI subcommand to track benchmarks on a feature branch aptly named `feature-branch`:

<TrackHistorical />

1. The Project must already exist. Set the `--project` flag or the `BENCHER_PROJECT` environment variable to the Project slug or UUID. (ex: `--project save-walter-white`)
1. The API token must already exist. Set the `--token` flag or the `BENCHER_API_TOKEN` environment variable to the API token. (ex: `--token ...`)
1. Optional: Set the `--adapter` flag or the `BENCHER_ADAPTER` environment variable to the desired adapter name. If this is not set, then the `magic` Adapter will be used. See [benchmark harness adapters](/docs/explanation/adapters/) for a full overview. (ex: `--adapter json`)
1. There are several options for setting the project branch. See [branch selection](/docs/explanation/branch-selection/) for a full overview.
    1. Use the current branch if it already exists. (ex: `--if-branch feature-branch`)
    1. Create a clone of target branch data if it already exists. (ex: `--else-if-branch main`)
    1. Otherwise, create a new branch with the name provided to `--if-branch`, which would be `feature-branch`. (ex: `--else-branch`)
1. Optional: Set the `--testbed` flag or the `BENCHER_TESTBED` environment variable to the Testbed slug or UUID. The Testbed must already exist. If this is not set, then the default `localhost` Testbed will be used. (ex: `--testbed localhost`)
1. Set the command to fail if an Alert is generated. In order for an Alert to be generated, a [Threshold](/docs/explanation/thresholds/) must already exist. (ex: `--err`)
1. Run your benchmarks and generate a Report from the results. (ex: `"bencher mock"`)

## Relative Benchmarking

Relative benchmarking runs a side-by-side comparison of two commits.
This can be useful when dealing with noisy CI/CD environments,
where the resource available can highly variable between runs.
This is an example of a <code><a href="/docs/explanation/bencher-run/">bencher run</a></code> CLI subcommand to perform relative benchmarking on a feature branch aptly named `feature-branch`:

<TrackRelative />

1. Checkout the feature branch. (ex: `feature-branch`)
1. Create an environment variable that is the name of the feature branch concatenated with the short git commit ID. This is important! It guarantees that for each run a new branch is created.
1. Checkout the target branch. (ex: `main`)
1. Run `bencher run` for the target branch:
    1. The given branch will not exist yet. (ex: `--if-branch "$FEATURE_BRANCH"`)
    1. So it will be create. (ex: `--else-branch`)
    1. Run the benchmarks three times. (ex: `--iter 3`)
1. Checkout the feature branch. (ex: `feature-branch`)
1. Create a [Threshold](/docs/explanation/thresholds/) for the feature branch:
    1. The Branch is the feature branch with the appended git commit ID. (ex: `--branch "$FEATURE_BRANCH"`)
    1. The Testbed is running locally. (ex: `--testbed localhost`)
    1. The Measure for the benchmarks is Latency. (ex: `--measure latency`)
    1. There are less than 30 metrics, use a Student's t-test. (ex: `--test t`)
    1. Set a right side boundary of 95.0% because a larger Latency indicates a performance regression. (ex: `--upper-boundary 0.95`)
1. Run `bencher run` for the feature branch:
    1. The Branch will exist since it was just created. (ex: `--branch "$FEATURE_BRANCH"`)
    1. Run the tests three times. (ex: `--iter 3`)
    1. Fold all three Metrics into the minimum value. (ex: `--fold min`)
    1. Set the command to fail if an Alert is generated by the [Threshold](/docs/explanation/thresholds/). (ex: `--err`)

<br/>
<br/>

> üê∞ Congrats! You have learned how to use Bencher to track benchmarks! üéâ

<br/>

<h2><a href="/docs/how-to/github-actions/">Add Bencher to GitHub Actions ‚û°</a></h2>
<h2><a href="/docs/how-to/gitlab-ci-cd/">Add Bencher to GitLab CI/CD ‚û°</a></h2>
